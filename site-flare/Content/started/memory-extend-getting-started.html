<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <h1>Getting Started with MemoryXtend</h1>
        <p> In a traditional deployment, all data grid entries are stored in RAM to provide the fastest performance possible. However, while RAM performs much better than a magnetic hard drive, it is also much more expensive. As SSD gains in popularity, we see new scenarios where storing part of the data in SSD and part in RAM provides great business value. Additionally, the new PMEM storage option provides performance similar to RAM, but at a cost closer to that of SS The MemoryXtend (blobstore) storage model allows an external storage medium (one that does not reside on the JVM heap) to store the Space data.</p>
        <p>This section provides an example that demonstrates  how to setup MemoryXtend, storing part of the data in SSD. To continue working with the feature, see the <a href="../admin/memoryxtend-overview.html">MemoryExtend</a> section for detailed usage and implementation.</p>
        <div class="tc-admon-note">
            <p>Set up a project - see <a href="xap-in-5-minutes.html">XAP in 5 minutes</a> <span style="color: #b22222;">Is this the best reference?</span></p>
        </div>
        <p>&#160;</p>
        <h1>Adding MemoryXtend in DataGrid</h1>
        <p>We will utilize the available RAM storage and continue to store the most used (hot) data, and store the less used (cold) data in SSD. </p>
        <ol>
            <li>
                <p>Modify the feeder's pu.xml to limit the types of data in this exercise:</p>
                <p>Change numberOfTypes to 3 in feeder/src/main/resources/META-INF/spring/pu.xml.</p>
            </li>
            <li>Modify the processor's pu.xml (processor/src/main/resources/META-INF/spring/pu.xml) to include the blobstore that allows external storage medium to store the data.<ol style="list-style-type: lower-alpha;"><li><p>Add these entries to define the blobstore in the schema definition:</p><pre xml:space="preserve"><code class="language-java">xmlns:blob-store="http://www.openspaces.org/schema/rocksdb-blob-store" </code></pre><pre xml:space="preserve"><code class="language-java">http://www.openspaces.org/schema/rocksdb-blob-store http://www.openspaces.org/schema/14.0/rocksdb-blob-store/openspaces-rocksdb-blobstore.xsd</code></pre></li><li><p>Add the blobstore that includes 4 instances with mapping directory to these paths</p><pre><code class="language-java">&lt;blob-store:rocksdb-blob-store id="rocksDbBlobstore" paths="[/tmp/memory-xtend-demo/db1,/tmp/memory-xtend-demo/db2,/tmp/memory-xtend-demo/db3,/tmp/memory-xtend-demo/db4]" mapping-dir="/tmp/memory-xtend-demo/mapping"/&gt;</code></pre><li><p>Modify the Space definition to include the blobstore, so it stores data type 1 in the SSD layer::<span style="color: #b22222;"> ADD&#160;INDENTS</span></p><pre><code class="language-xml">&lt;os-core:space id="space" url="/./space"&gt;
    &lt;os-core:blob-store-data-policy persistent="true" blob-store-handler="rocksDbBlobstore"&gt;
        &lt;os-core:blob-store-cache-query class="com.gigaspaces.demo.common.Data" where="type = 1"/&gt;
    &lt;/os-core:blob-store-data-policy&gt;
&lt;/os-core:space&gt;</code></pre></li></li></ol></li>
            <li><span class="tc-bold"> </span>
            </li>
        </ol>
        <h1>Verifying Extended Memory</h1>
        <p>Verity that extended memory is deployed correctly and data is now fetched from SSD layer.</p>
        <ol>
            <li>Build the project again.<br /></li>
            <li>Deploy the project again.</li>
            <p>Data type 1 is still in RAM layer.</p>
            <li>Undeploy the project.</li>
            <li>Re-deploy the project and verify that data with type 1 is fetched from the SSD layer.<p>Run this query  in Management Console and verify there is no data with type 1</p><pre xml:space="preserve">select UID, * from com.gigaspaces.demo.common.Data</pre></li>
        </ol>
    </body>
</html>