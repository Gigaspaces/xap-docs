<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <h1 class="tc-pagetitle">Configuring the Data Grid Using the Helm Chart</h1>
        <h1>Default Helm Chart</h1>
        <p>The <MadCap:variable name="General.ProductNameIE" /> Helm chart has a list of supported values that can be configured. To view this list, use the following Helm command:</p><pre><code class="language-bash">helm inspect insightedge
</code></pre>
        <p>The values.yaml file is printed in the command window, and each configurable value has a short explanation above it. The indentation in this printout indicates a use of a ".' (dot) in the value name. For example, the high availability property for the Platform Manager is listed as follows in the file:</p>
        <p><code>manager:</code>
            <br /><code>ha: false</code>
        </p>
        <p>The value you will set will look like this in the command window: <code>manager.ha=true</code></p>
        <h2>Customizing a Helm Chart</h2>
        <p>You can create additional values.yaml files with customized values.</p>
        <p>The following Helm command shows how a custom YAML file can be used to override the values in the original GigaSpaces Helm chart:</p><pre><code class="language-bash">helm install insightedge -f customValues.yaml --name hello
</code></pre>
        <h1 MadCap:conditions="Version.15-0-born">Kubernetes Services in KubeGrid</h1>
        <p MadCap:conditions="Version.15-0-born">Kubernetes uses services to externalize specific functionality in clusters to the "outside world". Kubernetes services define a logical set of Pods that support the services themselves, and a policy by which to access them. This policy is defined using the <span class="tc-italic">service type</span>. <MadCap:variable name="General.ProductNameXAP" /> uses the following service types in deployment:</p>
        <ul MadCap:conditions="Version.15-0-born">
            <li>
                <p>LoadBalancer - External load balancer that is dedicated to a specific service, and functions as a gateway to the pods that support the service.</p>
            </li>
            <li>
                <p>NodePort - Provides access to the service directly via the node on which the supporting pods are deployed.</p>
            </li>
        </ul>
        <h2 MadCap:conditions="Version.15-0-born">How Are Kubernetes Services Deployed in KubeGrid?</h2>
        <p MadCap:conditions="Version.15-0-born"><span class="tc-highlight">Explain how the manager chart is always important but the pu chart only needs attention when Space-based remoting is required. </span>These service types are configured in the manager and pu Helm charts. The <MadCap:variable name="General.ProductNameXAP" /></p>
        <p>bla blat</p>
        <ul>
            <li>The default service type in <MadCap:variable name="General.ProductNameXAP" /> is LoadBalancer. <MadCap:conditionalText MadCap:conditions="Default.DoNotShow">When deploying KubeGrid on minikube, consider these points (add a link to minikube usability)</MadCap:conditionalText></li>
            <li>Accessing a service of type LoadBalancer is done via the port field in the chart</li>
            <li>In the chart, the nodePort field is empty by default, meaning that for each service component (api, lrmi, lus etc.), kubernetes will assign a random value to the nodePort in the range of 30000-32767. You can set this value manually if you wish</li>
        </ul>
        <div class="tc-align-center">
            <p MadCap:conditions="Version.15-0-born">
                <img src="../Resources/Static/attachment_files/kubernetes/Helm-chart-service-type.png" class="tc-picture30" />
            </p>
        </div>
        <p MadCap:conditions="Version.15-0-born">To view the full service configuration, including ports, run the following command:</p><pre MadCap:conditions="Version.15-0-born"><code class="language-bash">kubectl describe svc &lt;service name&gt;</code> </pre>
        <p MadCap:conditions="Version.15-0-born">It is strongly recommended to leave the default port values. For more information about service types and when it may be advisable to modify the values, see <MadCap:xref href="kubernetes-space-based-remoting.html">Space-Based Remoting in Kubernetes</MadCap:xref>.</p>
        <h1 MadCap:conditions="Version.15-0-born">Upgrading the <MadCap:variable name="General.ProductNameXAP" /> Helm Charts</h1>
        <p><MadCap:variable name="General.ProductNameXAP" /> supports rolling upgrade of the Helm chart.</p>
        <p>To enable upgrading the charts while maintaining data consistency, you need to enable the readinessProbe in either the current or the new Helm chart. This ensures that the upgrade process, which first terminates the backup pods, won't begin to upgrade the primary pods before the backup pods have fully recovered and reloaded the data, and can therefore take leadership when the primary pods are terminated.</p>
        <p>You must mark the reuse-values flag to ensure that all your custom chart configurations (including the license and partition definitions) are not overwritten by the upgrade process. If you don't mark this flag, your system will revert to the default configurations.</p>
        <p>For example, run the following command to perform a Helm chart upgrade that changes the amount of memory for each service (pu) pod.</p><pre><code class="language-bash">helm upgrade demo xap --set pu.resources.limits.memory=600Mi,pu.readinessProbe.enabled=true --reuse-values</code></pre>
        <p MadCap:conditions="Version.15-0-born">&#160;</p>
    </body>
</html>