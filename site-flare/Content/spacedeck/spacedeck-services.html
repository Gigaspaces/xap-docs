<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <map id="map1">
            <area shape="rectangle" coords="31,228,438,655" dragDirection="0" />
            <area shape="rectangle" coords="486,228,891,656" dragDirection="0" href="gs-ops-manager-cluster-overview.html" />
            <area shape="rectangle" coords="940,227,1349,656" dragDirection="0" />
        </map>
        <h1 class="tc-pagetitle">SpaceDeck – Services</h1>
        <p>This part of the system allows you to create and execute low code data services. A query service will trigger a space query every time a request is made. </p>
        <p> Create service will deploy a REST service that will ruin the query. For use in client services, which are applications that interact with Spaces.</p>
        <div MadCap:conditions="Default.DoNotShow">
            <h1>Service Creator</h1>
            <p>ServiceCreator service, which exposes the REST&#160;endpoints, is deployed in the environment via the Kubernetes orchestration. Any new service creation request generates a new resource of the kind QueryService by submitting a request to the ServiceCreator service. Via the SpringBoot REST&#160;application, ServiceCreator service exposes the following APIs:</p>
            <ul>
                <li>
                    <p>Create Query Service given Spec.</p>
                </li>
                <li>
                    <p>Get service spec-parameters given its ID.</p>
                </li>
                <li>
                    <p>Get list of available services of this kind (queryService).</p>
                </li>
                <li>
                    <p>Delete service.</p>
                </li>
            </ul>
        </div>
        <div MadCap:conditions="Version.16-4-born">
            <h1>Security Roles &amp;&#160;Permissions</h1>
            <ul>
                <li>
                    <p>Security Roles and Permissions:</p>
                    <ul>
                        <li>
                            <p>Deploy/Undeploy actions will require special permission. A regular user without permission can only create a service.  In order to deploy or undeploy it they will require Manage Service permission. Refer to <MadCap:xref href="../security/security-overview.html">Security Overview</MadCap:xref> for more details. </p>
                        </li>
                        <li>
                            <p>Create/Delete will not require special permissions.</p>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <h1>View List of Services</h1>
        <div MadCap:conditions="Version.16-3-only">
            <p>The main screen displays a list of services. &#160;For our example, there have been three services created which have different statuses:</p>
            <p>
                <img src="../Resources/Images/SpaceDeck/SpaceDeck-Services1a.png" />
            </p>
        </div>
        <h2>Services&#160;Fields</h2>
        <ul>
            <li>
                <p><b>SERVICE NAME</b> – the name you define to the data source</p>
            </li>
            <li>
                <p><b>STATUS</b> – The status of the service:</p>
                <ul style="list-style-type: circle;">
                    <li>
                        <p><b>Undeployed</b>: a service that has been deployed and is not undeployed for edit purposes.</p>
                    </li>
                    <li>
                        <p><b>Deployed:</b> Ready for external execution</p>
                    </li>
                    <li>
                        <p><b>Created:</b> a service that has not been deployed and can still be edited,</p>
                    </li>
                </ul>
            </li>
            <li>
                <p><b>SPACE&#160;NAME</b> – The name of the space to which the service is associated.</p>
            </li>
            <li>
                <p MadCap:conditions="Version.16-3-only"><b>URL</b> – The URL of the service.</p>
            </li>
            <li>
                <p MadCap:conditions="Version.16-4-born"><b>SWAGGER&#160;LINK</b> - The link to Swagger UI</p>
            </li>
            <li>
                <p><b>DESCRIPTION</b> – a free-format description of the service</p>
            </li>
            <li>
                <p MadCap:conditions="Version.16-3-only"><b>REPLICAS</b> – The amount of replicas. If it is a large service, it is recommended to define more than 1 so it can be balanced over multiple instances.</p>
            </li>
            <li>
                <p MadCap:conditions="Version.16-4-born"><b>REPLICAS (ACTUAL/PLANNED)</b> – The amount of replicas. If it is a large service, it is recommended to define more than 1 so it can be balanced over multiple instances.</p>
            </li>
        </ul>
        <h2>Create a Service - Configuration</h2>
        <p>From the main Services screen, click  <b>New +</b></p>
        <p>The following configuration screen is displayed - the mandatory fields are outlined in red:</p>
        <p>
            <img src="../Resources/Images/SpaceDeck/SpaceDeck-Services5.png" style="width: 850px;height: 535px;" />
        </p>
        <h2>Services Configuration Parameters</h2>
        <ul>
            <li>
                <p><b>(Source drop-down list)</b> – Select which GigaSpaces Space object the service should be executed against.</p>
            </li>
            <li>
                <p><b>Load Query</b>: Displays a list of previously saved and run queries.</p>
            </li>
            <li>
                <p><b>Service Name:</b> Provide a unique name for the service.</p>
                <div class="tc-admon-note">
                    <p>The service name must be in lower case and can contain numbers, but only one hyphen "-"</p>
                </div>
            </li>
            <li>
                <p><b>Replicas:</b> How many replicas are being used.</p>
            </li>
            <li>
                <p><b>Description:</b>&#160;Description of the service you are creating.</p>
            </li>
            <li>
                <p><b>(Body of the service)</b> – enter a SQL-99 compliant service. Initially there is an example query service displayed in gray, As soon as you lick on that area, it is replaced by a blank screen ready for you to create your service. The results of the example service are also displayed (MIN_AGE, MAX_AGE).</p>
                <p><b>Retrieve first</b> – limit the query response to the desired number of rows. A maximum of 10,000 rows can be retrieved.</p>
            </li>
        </ul>
        <h2>Run or Save the Query and Create the Service</h2>
        <p>Click <b>Run Query</b> to test the query. The query results will be displayed. If there is a problem with the query a Query validation failed error will be displayed at the bottom of the screen.</p>
        <p>Click <b>Save query</b> to save the query which will then be accessible via the <b>Load Query</b> drop-down.</p>
        <p>Click <b>Create Service</b> to create a service. It will now be displayed on the main screen with the status <b>Created</b>:</p>
        <p>
            <img src="../Resources/Images/SpaceDeck/SpaceDeck-Services6.png" style="width: 378px;height: 302px;" />
        </p>
        <h2><a name="DeployService"></a>Deploy the Service</h2>
        <p>Click the new service name and then to deploy the service, click <b>Deploy</b>:</p>
        <p>
            <img src="../Resources/Images/SpaceDeck/SpaceDeck-Services7.png" style="width: 761px;height: 434px;" />
        </p>
        <p>The newly created service will now be displayed on the main screen with the status <b>Deployed</b>:</p>
        <p>
            <img src="../Resources/Images/SpaceDeck/SpaceDeck-Services8.png" style="width: 396px;height: 322px;" />
        </p>
        <h2>Undeploy the Service</h2>
        <p>A deployed service can be undeployed by clicking the SERVICE&#160;NAME and clicking <b>Undeploy</b>:</p>
        <p>
            <img src="../Resources/Images/SpaceDeck/SpaceDeck-Services9.png" style="width: 764px;height: 504px;" />
        </p>
        <p>The undeployed service will now be displayed on the main screen with the status <b>Undeployed</b>:</p>
        <p>
            <img src="../Resources/Images/SpaceDeck/SpaceDeck-Services10.png" style="width: 408px;height: 342px;" />
        </p>
        <div>
            <h2>Delete a Service</h2>
            <p>There is an option to Undeploy and then Delete a service by clicking the kebab menu (vertical three-dot menu) on the far right of the main Services Fields:</p>
            <p>
                <img src="../Resources/Images/SpaceDeck/SpaceDeck-Services1b.png" style="width: 908px;height: 135px;" />
            </p>
            <p>Then select <b>Undeploy</b> and then <b>Delete</b> the service: </p>
            <p>
                <img src="../Resources/Images/SpaceDeck/SpaceDeck-Services11a.png" />
            </p>
        </div>
        <div MadCap:conditions="Default.DoNotShow">
            <h2>Behind the Scenes</h2>
            <p>The ServiceCreator service, which exposes REST endpoints, is deployed in the environment. &#160;In addition, the ServiceCreator operator is deployed. A new service request generates a new resource of type QueryService by submitting a request to the ServiceCreator service. More information about <a href="../admin/deploying-services.html">Deploying Services</a>.</p>
        </div>
        <p>&#160;</p>
    </body>
</html>