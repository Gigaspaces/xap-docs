<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <h1 class="tc-pagetitle">Scale Out/In</h1>
        <h1>Horizontal Scaling</h1>
        <p>Horizontal scaling, referred to as <b><a href="production-Scale-Out-In.html">Scale Out/Scale In</a></b>, means to add or reduce the number of partitions used for an application.</p>
        <p>For example, additional partitions may be created in the same server, or alternatively, servers may be added or removed.</p>
        <p style="text-align: center;">
            <img src="../Resources/Static/images/Scaling-example-of-horizontal-scaling.jpg">
            </img>
        </p>
        <p>Big data is often stored in geographically dispersed nodes, which includes partitioning of databases.</p>
        <p>If the application involves few cross-partition joins, it may be appropriate for Scale Out/Scale In.</p>
        <p>NoSQL databases often use Scale Out/Scale In.</p>
        <h2>Advantages</h2>
        <ul>
            <li>Horizontal scaling can be less expensive than vertical scaling - it is generally less expensive to add cloud storage, than to purchase new physical machines.</li>
            <li>This method of rescaling provides resilience and fault tolerance - with more partitions, the impact of a partition failure is lessened.</li>
            <li>Horizontal scaling supports linear increases in capacity on the fly - RAM or CPU capacity can be increased or decreased while maintaining a constant RAM:CPU ratio .</li>
        </ul>
        <div class="tc-admon-attention">
            <p>Scale Out/In may cause a temporary quiesce of the affected partitions. It is recommended to perform the scaling operation during an off-peak period.</p>
        </div>
        <h2>Pre-requisites</h2>
        <p>Scale Out/In is available for a partitioned cluster schema with a high availability cluster.</p>
        <p>Kubernetes, ElasticGrid and ServiceGrid orchestration methods are supported.</p>
        <div class="tc-admon-attention">
            <p>in ServiceGrid, the GSC's must be initially spawned by the user before performing a Scale Out operation.</p>
        </div>
        <p>The following features are not currently supported for Scale Out/In:</p>
        <ul>
            <li>AutoGeneratedId</li>
            <li>Fifo</li>
            <li>memoryXtend</li>
            <li>SpaceIterator</li>
        </ul>
        <p>&#160;</p>
        <div class="tc-admon-important">
            <p>During the Scale Out operation, the first read/write operation will trigger a Java exception, which can be handled as follows:
			</p><pre><code class="language-java">
try {
    gigaSpace.writeMultiple(entries);
} 
catch (WriteMultipleException e) {
    gigaSpace.writeMultiple(entries);
}
</code></pre>
            <p>Subsequent read/write operations will not raise this exception.</p>
        </div>
        <h2>Scale Out/In APIs</h2>
        <p>Scale Out/In can be performed using the Ops Manager user interface, the Command Line Interface (CLI), and programmatically using REST-API. </p>
        <h2>Types of Scale Out/In</h2>
        <p>Scale Out/In can be performed for selected partitions, or for all partitions using a particular service. Both types of Scale Out/In are shown below.</p>
        <div class="tc-admon-note" MadCap:conditions="Default.DoNotShow">
            <p>The terminology for scaling is relative: If there are <b>three </b>partitions of size 60Mb, 80Mb and 100Mb, scaling to <b>five </b>partitions of 85Mb will scale <b>all five partitions</b> to 85Mb. This is a <b>Scale Out </b>because more partitions are deployed. </p>
            <p>Note that RAM is increased for two partitions (60Mb to 85Mb; 80Mb to 85Mb) and decreased for one partition (100Mb to 85Mb).</p>
        </div>
        <div class="tc-admon-note">
            <p>The terminology for scaling is relative: If there are three partitions using a service, scaling to to five partitions is a Scale Out , while scaling to two partitions is a Scale In.</p>
        </div>
        <h2>Scale Out/In for a Partition</h2>
        <p>In this method of horizontal scaling, you specify one or more partitions to scale. </p>
        <div class="easyui-tabs" plain="true" data-options="">
            <div title="GigaSpaces Ops Manager" style="padding:10px" MadCap:conditions="Version.15-2-born">
                <p>Ops Manager</p>
            </div>
            <div title="Command Line Interface" style="padding:10px">
                <p>yyyyy cli here xxxxx </p>
            </div>
            <div title="REST Manager API" style="padding:10px">
                <p>zzzzz rest man here zzzzz  </p>
            </div>
        </div>
        <p>&#160;</p>
        <h2>Scale Out/In for a Service</h2>
        <p>In this method of horizontal scaling, all partitions that use a particular service are scaled. The number of partitions can be increased or decreased.</p>
        <div class="easyui-tabs" plain="true" data-options="">
            <div title="GigaSpaces Ops Manager" style="padding:10px" MadCap:conditions="Version.15-2-born">
                <p>Click on the service card of the desired service in Ops Manager. The Service Details screen will display:</p>
                <p>
                    <img src="../Resources/Static/images/SOSI--click-on-ellipsis-menu.jpg" />
                </p>
                <p>Note the ellipsis menu (three vertical dots). Click on the option Scale Out/In. Depending on the method of orchestration you are using, the next screen will appear as follows:</p>
                <p>ServiceGrid:</p>
                <p>
                    <img src="../Resources/Static/images/SOSI-service-grid.jpg" />
                </p>
                <p>In the example above, there are currently 16 partitions using the service. You can choose one of the suggested numbers of partitions, or press Custom to choose any number of partitions. Note that the new partitions will all have the same allocation of RAM and CPU as the existing partitions.</p>
                <p>Kubernetes and ElasticGrid:</p>
                <p>
                    <img src="../Resources/Static/images/SOSI-Kubernetes-and-ElasticGrid.jpg" />
                </p>
                <p>In the example above, there are currently 16 partitions using the service. You can choose one of the suggested numbers of partitions, or press Custom to choose any number of partitions.</p>
                <p>Note that by default the suggested RAM (8M) and CPU (200Mib) for the new partitions is based on the most frequent allocation for the existing partitions. Click on <b>&gt; CPU </b>or<b> &gt; RAM </b>to override these suggested values for the new partitions.</p>
                <p>After entering the desired values and pressing <b>Apply</b>, the system will display a confirmation screen:</p>
                <p>
                    <img src="../Resources/Static/images/SOSI-Confirmation-Screen.jpg" />
                </p>
                <p>Press <b>Scale Now</b> to begin the scaling process.</p>
                <p>As the scaling is underway, a progress message will display in the screen banner:</p>
                <p>
                    <img src="../Resources/Static/images/SOSI-In-Progress.jpg" />
                </p>
                <p>&#160;</p>
                <p>Note that while the scaling is in progress, the status of the individual affected services will display in the Service Details screen:</p>
                <p>
                    <img src="../Resources/Static/images/SOSI-Suspended.jpg" />
                </p>
                <p>&#160;</p>
                <p>&#160;</p>
                <p>&#160;</p>
                <p>&#160;</p>
                <p>&#160;</p>
            </div>
            <div title="Command Line Interface" style="padding:10px">
                <p>yyyyy cli here xxxxx </p>
            </div>
            <div title="REST Manager API" style="padding:10px">
                <p>zzzzz rest man here zzzzz  </p>
            </div>
        </div>
        <p>&#160;</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <h2>Adding a partition</h2>
        <p>pu scale-horizontal/scale-h mySpace 4</p>
        <p>(the space had 2 partitions, so this is a scale up of 2 partitions)</p>
        <p>&gt;&gt; Request ID   6</p>
        <p>&gt;&gt; Status can be tracked using the command: request status 6</p>
        <p>request status 6</p>
        <p>&#160;</p>
        <p>Discussion</p>
        <p>REST API Example</p>
        <p>Memory and cpu params are applicable in scale out when using ElasticGrid (not applicable in ServiceGrid)</p>
        <p>Removing a partition</p>
        <p>Here is how to do it and how to monitor it:</p>
        <p>pu scale horizontal mySpace 1</p>
        <p>(the space had 4 partitions, so this is a scale down of 3 partitions)</p>
        <p>REST API Example</p>
        <p>Monitoring the Status of the system</p>
        <p>8. &lt;&lt;Yael&gt;&gt;&lt;</p>
        <p>Ops Manager Example</p>
        <p>(I will add for add and remove partition)</p>
        <p>From Sharon's zoom on wednesday -- https://projects.invisionapp.com/share/SBY7HABU2YM#/screens/427253429</p>
        <p>*sharon-deploy-service-and-view-log*</p>
        <p>Looking at the details of a service --</p>
        <p>&lt;&lt;note the undeploy command (for service deploy, not here)&gt;&gt;</p>
        <p>Scale out/in is here, so click on it:</p>
        <p>Above screenshot is for servicegrid orchestration.</p>
        <p>(e.g. a table with tabs for different orch)</p>
        <p>in SG, see number of current partitions for this service and can change, then Apply:</p>
        <p>only in K and Elasticgrid will have cpu and ram not in SG</p>
        <p>in K and EG, can add new psrtitions that have a different size than the existing partition.</p>
        <p>but in sg, when add new partitions, they will be same size as other partitions. no cpu and ram options.</p>
        <p>Scale Now:</p>
        <p>Suspended:</p>
        <p>.</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p>&#160;</p>
        <p>&#160;</p>
    </body>
</html>