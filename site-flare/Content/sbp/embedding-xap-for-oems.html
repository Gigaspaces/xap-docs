<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
<head></head>
<body>
<h1>Embedding XAP for OEMs</h1>
  

<table>
<thead>
<tr>
<th>Author</th>
<th>XAP Version</th>
<th>Last Updated</th>
<th>Reference</th>
<th>Download</th>
</tr>
</thead>

<tbody>
<tr>
<td>Shay Hassidim</td>
<td></td>
<td>Feb 2014</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<p>GigaSpaces XAP can be used as a self contained application platform in which case your application would be contained (embedded) within the GigaSpaces application container. GigaSpaces XAP can also be embedded within external application processes. This section describe the steps required to embed GigaSpaces within external application processes.</p>

<h1><a name="general-description">&#160;</a>General Description</h1>

<p>Embedding GigaSpaces cluster can be as simple as starting the <a href="/product_overview/service-grid.html#gsa">GigaSpaces Agent</a> in each machine.
The agent is responsible for bootstrapping the GigaSpaces cluster environment implicitly. The agent uses a peer to peer communication between themselves to ensure that the environment is up and running also in an  event of a failure.</p>

<p>Once the agent get started you can start using the <a href="/xap/14.0/dev-java/elastic-processing-unit-overview.html">GigaSpaces Elastic middleware</a> directly from your application.
The Elastic Middleware automatically provision itself on the GigaSpaces cluster based on the capacity and other SLA requirements.</p>

<p>The following example shows how to embed GigaSpaces Data Grid using this model.</p>

<h1><a name="example-embedding-gigaspaces-data-grid">&#160;</a>Example - Embedding GigaSpaces Data Grid</h1>

<h2><a name="acquiring-and-installing-xap">&#160;</a>Acquiring and Installing XAP</h2>

<p>Acquiring XAP is simple: download an archive from the <a href="http://www.gigaspaces.com/LatestProductVersion">Current Releases</a> page.</p>

<p>Installation of XAP is just as easy as getting XAP is: since it's a simple archive, unzip it into a directory of your choice.</p>

<p>On Windows, for example, one might install it into <code>C:\tools\</code>, leading to an installation directory of <code>C:\tools\gigaspaces-xap-premium-8.0.5\</code>.</p>

<p>In a UNIX environment, you might install it into <code>/usr/local/</code>, which would result in a final installation directory of <code>/usr/local/gigaspaces-xap-premium-8.0.5/</code>.</p>

<h2><a name="running-the-gigaspaces-agent">&#160;</a>Running the GigaSpaces Agent</h2>

<p>A GigaSpaces node is best facilitated through the use of a service called the "<a href="/product_overview/service-grid.html#gsa">Grid Service Agent</a>," or GSA.</p>

<p>The simplest way to start a node with GigaSpaces is just to invoke the GSA in the GigaSpaces home directory, preferably in its own command shell (although you can easily start a background process with <code>start</code> or <code>nohup</code> if desired):</p>

<div class="easyui-tabs" plain="true" data-options=""><div title="  Windows " style="padding:10px"><pre><code class="language-java">.\gs-agent.bat
</code></pre>
</div>

<div title="  Linux " style="padding:10px"><pre><code class="language-java">./gs-agent.sh
</code></pre>
</div>
</div>

<h2><a name="connecting-to-a-data-grid">&#160;</a>Connecting to a Data Grid</h2>

<p>It's actually fairly easy to write some code that can connect to an existing datagrid, and deploy a new one if the datagrid doesn't exist.</p>

<p>First, make sure the <a href="/xap/14.0/started/installation.html">classpath</a> includes the GigaSpaces runtime. Then, connect to the datagrid. The following snippets shows how to create and deploy an Elastic Data Grid and how to find an existing data Data Grid service.</p>

<p>Creating and deploying an Elastic Data Grid</p>

<pre><code class="language-java">        Admin admin = new AdminFactory().createAdmin();
        GridServiceManager esm = admin.getGridServiceManagers().waitForAtLeastOne();
        ProcessingUnit pu = esm.deploy(new SpaceDeployment(spaceName)
          .partitioned(2, 1));
        admin.close();
</code></pre>

<p>Getting a reference to an existing DataGrid instance</p>

<pre><code class="language-java">     UrlSpaceConfigurer configurer =
        new UrlSpaceConfigurer("jini:/*/*/" + spaceName);
      IJSpace space = configurer.space();
</code></pre>

<p>You can also use a simple helper utility (DataGridConnectionUtility) that combines the two. It first look for a DataGrid instance and if one doesn't exist it will create a new one; it's trivial to alter the <code>getSpace()</code> method to increase the number of nodes or even scale dynamically as required.</p>

<div class="tc-admon-tip">
  
  <p>A The DataGridConnectionUtility class <a href="https://github.com/Gigaspaces/bestpractices/blob/master/plains/src/main/java/org/openspaces/plains/datagrid/DataGridConnectionUtility.java">is available on Github</a>, in the "plains" project.</p>
</div>

<p>With this class in the classpath, getting a datagrid reference is as simple as:</p>

<pre><code class="language-java">GigaSpace space=DataGridConnectionUtility.getSpace("myGrid");
</code></pre>

<div class="tc-admon-refer">
  
  <ul>
<li><a href="/xap/14.0/dev-java/modeling-your-data.html">Modeling and Accessing Your Data</a></li>
<li><a href="deploying-and-interacting-with-the-space.html">Deploying and Interacting with the Space</a></li>
</ul>
</div>

</body>
</html>