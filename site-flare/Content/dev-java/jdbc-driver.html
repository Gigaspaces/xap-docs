<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
<head></head>
<body>
<h1>JDBC Driver</h1>
  

<p>The XAP JDBC interface allows database-driven applications to interact with Spaces via SQL queries and commands. A query processor transparently translates SQL queries into legal Space operations. No integration is required - all you need to do is point the application to the XAP JDBC driver like any other JDBC driver.</p>

<div class="tc-admon-note">
  
  <p>This JDBC driver is not SQL-99 compliant. SQL-99 compliant query functionality is available in the InsightEdge Enterprise edition. Refer to the SQLQuery and <a href="../dev-java/sql-query-intro.htm">JDBC Driver</a> topics in the Developer Guide.</p>
</div>

<p>Applications can access the XAP data grid using the JDBC API; data written to the IMDG using the JDBC API can also be accessed using other APIs.</p>

<div class="tc-admon-note">
  
  <p>An alternative way of querying the Space using SQL syntax is the <a href="query-sql.htm">SQLQuery</a> class. This class allows you to perform SQL queries directly against Space objects, without adding O/R mapping complexity.</p>
</div>

<p>JDBC support in XAP is centered around the Space-Based Architecture - its main motivation is to enable more sophisticated querying of the Space, beyond the template matching provided by the <a href="the-gigaspace-interface-overview.htm">The GigaSpace Interface</a>.</p>

<p>XAP is not a full-fledged relational database and it does not support the full SQL92 standard (see <a href="#supported-features">JDBC Supported Features</a>). However, the existing SQL support is extremely useful for applications that need to execute queries on a Space for real-time queries.</p>

<div class="tc-admon-note">
  <p class="tc-admon-title">Info</p>
  <p>You can use the <a href="../admin/space-gigaspaces-cli.htm">SQL Command Line</a> to query and fetch data from the IMDG. The SQL Command Line using the XAP JDBC Driver when accessing the IMDG.</p>
</div>

<h2><a name="using-existing-sql-code-and-porting-to-external-systems">&#160;</a>Using Existing SQL Code and Porting to External Systems</h2>

<p>The JDBC interface is mostly used to enable access to the Space through standard SQL tools and programming interfaces. You can write SQL commands against the Space, and the same code will in many (simple) cases be compatible with other SQL implementations.</p>

<p>Porting existing JDBC code to the Space is certainly doable (but would require some level of adaptation depending on the specifics of the case and the complexity of the SQL queries). For legacy applications, it may still be easier than porting existing code to leverage the space technology directly. The SQL support is limited, therefore this path should be taken with caution.</p>

<h1><a name="getting-the-xap-jdbc-connection">&#160;</a>Getting the XAP JDBC Connection</h1>

<p>In order to get the JDBC connection you should use the following JDBC Driver classname:</p>

<pre><code class="language-java">Class.forName("com.j_spaces.jdbc.driver.GDriver");
</code></pre>

<p>The connection URL should include :<code>jdbc:gigaspaces:url:&lt;Space URL&gt;</code> â€“ e.g.:</p>

<pre><code class="language-java">Connection con = DriverManager.getConnection("jdbc:gigaspaces:url:jini://*/*/mySpace");
</code></pre>

<div class="tc-admon-note">
  
  <p>For more details on the Space URL, refer to the <a href="the-space-configuration.htm">Space URL</a> page.</p>
</div>

<p>Example:</p>

<pre><code class="language-java">Connection conn;
Class.forName("com.j_spaces.jdbc.driver.GDriver").newInstance();
String url = "jdbc:gigaspaces:url:jini://*/*/mySpace";
conn = DriverManager.getConnection(url);
Statement st = conn.createStatement();
String createTable = "CREATE TABLE COFFEES (COF_NAME VARCHAR(32) INDEX,SUP_ID INTEGER INDEX, " +
                     "PRICE FLOAT INDEX,SALES INTEGER INDEX,TOTAL INTEGER)";
st.executeUpdate(createTable);

String query = "SELECT COF_NAME, PRICE FROM COFFEES";
st = conn.createStatement();
ResultSet rs = st.executeQuery(query);
while (rs.next()) {
    String s = rs.getString("COF_NAME");
    float n = rs.getFloat("PRICE");
    System.out.println(s + "   " + n);
}
</code></pre>

<div class="tc-admon-note">
  
  <p>There is no need to deal with JDBC connection polling when using XAP JDBC driver.</p>
</div>

<h2><a name="embedding-the-query-processor-within-the-application">&#160;</a>Embedding the Query Processor Within the Application</h2>

<p>By default, the Query Processor is running server side.
It is possible to set the Query Processor to run embedded within the application by passing a parameter to the JDBC driver:</p>

<pre><code class="language-java">Class.forName("com.j_spaces.jdbc.driver.GDriver").newInstance();
String url = "jdbc:gigaspaces:url:jini://*/*/mySpace";
Properties properties = new Properties();
properties.put("com.gs.embeddedQP.enabled", "true");
conn = DriverManager.getConnection(url, properties);
</code></pre>

<div class="tc-admon-note">
  
  <p>It is also possible to set the "com.gs.embeddedQP.enabled" connection property as a System property (the connection property overrides the system property).</p>
</div>

<h1><a name="transaction-support">&#160;</a>Transaction Support</h1>

<p>The XAP JDBC Driver supports the following transaction managers:</p>

<ul>
<li>Local Transaction Manager</li>
<li>Distributed embedded Jini Transaction Manager (default)</li>
<li>Lookup Distributed Transaction Manager</li>
</ul>

<p>The transaction manager type can be configured via JDBC's connection properties (there are additional properties for lookup distributed tx manager):</p>

<table>
<thead>
<tr>
<th align="left">Property</th>
<th align="left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">gs.tx_manager_type</td>
<td align="left">Transaction manager type: "local"/"distributed"/"lookup_distributed"</td>
</tr>

<tr>
<td align="left">gs.lookup_tx.name</td>
<td align="left">Lookup service name</td>
</tr>

<tr>
<td align="left">gs.lookup_tx.timeout</td>
<td align="left">Lookup timeout (default=3000)</td>
</tr>

<tr>
<td align="left">gs.lookup_tx.groups</td>
<td align="left">Lookup groups</td>
</tr>

<tr>
<td align="left">gs.lookup_tx.locators</td>
<td align="left">Lookup locators</td>
</tr>
</tbody>
</table>

<p>Transaction Manager Type Configuration Example:</p>

<pre><code class="language-java">Class.forName("com.j_spaces.jdbc.driver.GDriver");
Properties props = new Properties();
props.put("gs.tx_manager_type", "distributed");
Connection conn = DriverManager.getConnection("jdbc:gigaspaces:url:jini://*/*/mySpace", props);
</code></pre>

<h1><a name="getting-the-jdbc-connection-from-a-space-proxy">&#160;</a>Getting the JDBC Connection from a Space Proxy</h1>

<p>You can get an XAP JDBC connection from a Space proxy using the <code>com.j_spaces.jdbc.driver.GConnection</code>. See the following example:</p>

<pre><code class="language-java">IJSpace gsSpaceProxy;  //your space proxy. You can get it using GigaSpace.getSpace()
GConnection connection = GConnection.getInstance(gsSpaceProxy);
connection.setUseSingleSpace(true); //false = cluster, true=single
</code></pre>

<p>The <code>setUseSingleSpace</code> method allows you to get a JDBC connection that encapsulates a clustered proxy or to an embedded Space proxy.</p>

<p>You can also use the following <code>GConnection</code> method to set the user and password for a secured Space:</p>

<pre><code class="language-java">public static Connection getInstance(IJSpace space, String username, String password)
    throws SQLException
</code></pre>

<h1><a name="combining-the-space-api-with-the-jdbc-api">&#160;</a>Combining the Space API with the JDBC API</h1>

<p>The following example uses the Space API <a href="task-execution-overview.htm">DistributedTask</a> with the JDBC API. With this example we use map/reduce approach to query the Space using the JDBC API, but send the JDBC query to be executed within the Space. This approach scales very well when the Space has multiple partitions, eliminating the need to retrieve the actual Space objects from the Space to evaluate the query. Retrieving objects from the Space involves network latency and serialization overhead.</p>

<p>With the example below we execute the following query:</p>

<pre><code class="language-java">Select FIELD from CLASS group by FIELD sort by FIELD
</code></pre>

<p>The query is executed in two phases:</p>

<p>Step 1. A <code>DistributedTask</code> is sent to each partition to execute the following JDBC query:</p>

<pre><code class="language-java">Select FIELD from CLASS group by FIELD
</code></pre>

<p>The result is then sent into the reducer running on the client side.</p>

<p>Step 2. The <code>DistributedTask.reduce</code> method running on the client side aggregates the results from all the partitions and sorts the final set.</p>

<pre><code class="language-java">public class JDBCTask implements DistributedTask&lt;String[], String[]&gt;{

    public JDBCTask(String queryStr){
        this.queryStr=queryStr;
    }

    @TaskGigaSpace
    transient GigaSpace gigaspace;
    transient Statement stmt;
    transient PreparedStatement perstmt;
    transient Connection con;
    String queryStr;

    public String[] execute() throws Exception{

        Connection con = getConnection();
        stmt = con.createStatement();
        ArrayList&lt;String&gt; result = new ArrayList&lt;String&gt; ();
        ResultSet rs =stmt.executeQuery(queryStr);
        while (rs.next()) {
            result.add(rs.getString(1));
        }
        stmt.close();
        con.close();
        String resultArr [] = new String[result.size()] ;
        resultArr = result.toArray(resultArr);
        return resultArr;
    }

    public String[] reduce(List&lt;AsyncResult&lt;String[]&gt;&gt; results) throws Exception {
        Iterator&lt;AsyncResult&lt;String[]&gt;&gt; iter = results.iterator();
        String[] result_ = null;
        HashSet&lt;String&gt; result = new HashSet&lt;String&gt;();
        while (iter.hasNext())
        {
            result_ = iter.next().getResult();
            for (int i=0;i&lt;result_.length;i++)
            {
                result.add(result_[i])  ;
            }

        }

        String[] fullResult = new String[result.size()];
        fullResult = result.toArray(fullResult);
        Arrays.sort(fullResult);
        return fullResult;
    }

    public Connection getConnection()
    {
        GConnection connection = null;
        try {
            Class.forName("com.j_spaces.jdbc.driver.GDriver");

        } catch(java.lang.ClassNotFoundException e) {
            System.err.print("ClassNotFoundException: ");
            System.err.println(e.getMessage());
        }

        try {
            connection = GConnection.getInstance(gigaspace.getSpace());
            connection.setUseSingleSpace(true); //false = cluster, true=single

        } catch(SQLException ex) {
            System.err.println("SQLException: " + ex.getMessage());
        }

        return connection;
    }
}
</code></pre>

<pre><code class="language-java">GigaSpace gigapace =new GigaSpaceConfigurer(new SpaceProxyConfigurer("mySpace")).gigaSpace();
AsyncFuture&lt;String[]&gt; result= gigapace.execute(new JDBCTask("select str from " +MyClass.class.getName() + " group by str"));
String[] result_str = result.get();
System.out.println("The Result:" + Arrays.asList(result_str));
</code></pre>

<h1><a name="sql-to-java-type-mapping">&#160;</a>SQL- to-Java Type Mapping</h1>

<p>The XAP JDBC Driver translates in runtime a Space object into a relational table representation.</p>

<ul>
<li>All Java class attributes are translated into their corresponding SQL types.</li>
<li>Class names are translated into table names.</li>
<li>Field names are translated into column names.</li>
<li>Indexed columns are translated into indexed fields. Make sure the <code>btree</code> index is turned on, allowing fast processing of bigger than/less than queries. For more details, refer to the <a href="indexing.htm#Extended Indexing">Indexing</a> section.</li>
</ul>

<p>The following information represents the SQL-to-Java mapping conducted at runtime when a table is created via the JDBC driver.</p>

<table>
<thead>
<tr>
<th align="left">SQL Type</th>
<th align="left">Java Type</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">VARCHAR, VARCHAR2</td>
<td align="left">java.lang.String</td>
</tr>

<tr>
<td align="left">CHAR</td>
<td align="left">java.lang.String</td>
</tr>

<tr>
<td align="left">DATE</td>
<td align="left">java.sql.Date</td>
</tr>

<tr>
<td align="left">DATE</td>
<td align="left">java.sql.Timestamp</td>
</tr>

<tr>
<td align="left">TIME</td>
<td align="left">java.sql.Time</td>
</tr>

<tr>
<td align="left">FLOAT</td>
<td align="left">java.lang.Float</td>
</tr>

<tr>
<td align="left">REAL</td>
<td align="left">java.lang.Float</td>
</tr>

<tr>
<td align="left">NUMERIC</td>
<td align="left">java.math.BigDecimal</td>
</tr>

<tr>
<td align="left">DECIMAL</td>
<td align="left">java.math.BigDecimal</td>
</tr>

<tr>
<td align="left">DOUBLE</td>
<td align="left">java.lang.Double</td>
</tr>

<tr>
<td align="left">BOOLEAN</td>
<td align="left">java.lang.Boolean</td>
</tr>

<tr>
<td align="left">INTEGER</td>
<td align="left">java.lang.Integer</td>
</tr>

<tr>
<td align="left">TIMESTAMP</td>
<td align="left">java.sql.Timestamp</td>
</tr>

<tr>
<td align="left">LONG</td>
<td align="left">java.lang.Long</td>
</tr>

<tr>
<td align="left">BLOB</td>
<td align="left">com.gigaspaces.jdbc.driver.Blob</td>
</tr>

<tr>
<td align="left">CLOB</td>
<td align="left">com.gigaspaces.jdbc.driver.Clob</td>
</tr>
</tbody>
</table>

<h1><a name="supported-features">&#160;</a>Supported Features</h1>

<p><span class="tc-bold">XAP JDBC supports the following</span>:</p>

<ul>
<li>All Basic SQL statements: <code>SELECT</code>, <code>INSERT</code>, <code>DELETE</code>, <code>UPDATE</code>, <code>CREATE TABLE</code>, <code>DROP TABLE</code>.</li>
<li><code>AND/OR</code> operators to join two or more conditions in a <code>WHERE</code> clause.</li>
<li><code>NOT IN</code> and <code>NOT NULL</code></li>
<li>Aggregate functions: <code>COUNT</code>, <code>MAX</code>, <code>MIN</code>, <code>SUM</code>, <code>AVG</code>.</li>
<li>All basic logical operations to create conditions: =, &lt;&gt;, &lt;,&gt;, &gt;=, &lt;=, <code>[NOT]</code> like, is <code>[NOT]</code> <code>null</code>, <code>IN</code>, <code>BETWEEN</code>.</li>
<li>Nested fields query - You may use as part of the select statement nested fields within collections (maps) or objects within the Space object.</li>
<li>Multiple tables <code>Join</code> - Join supports the selection of multiple tables. It uses the Cartesian product of the tables data to form the result set. The join will perform well when having tables with small/medium size (up to 1,000,000 rows).</li>
<li><code>ORDER BY</code> for multiple columns.</li>
<li><code>GROUP BY</code> for multiple columns.</li>
<li><code>DISTINCT</code> (although not when used with functions or aggregations)</li>
<li>Column aliases.</li>
</ul>

<div class="row"><div class="easyui-accordion" data-options="selected:'-1'" plain="true"><div title="Click here for example..." style="padding:10px;"><pre><code class="language-java">Connection conn;
Statement stmt = conn.createStatement();
ResultSet rs = stmt.executeQuery("SELECT ID AS Identifier, NAME AS FullName FROM PERSON WHERE Identifier = 210");
</code></pre>
</div>
</div></div>

<ul>
<li>Table aliases â€“ tables are allowed to use aliases throughout the query.</li>
<li>Using a sub-query in the <code>FROM</code> clause.</li>
</ul>

<div class="row"><div class="easyui-accordion" data-options="selected:'-1'" plain="true"><div title="Click here for example..." style="padding:10px;"><pre><code class="language-java">Connection conn;
Statement stmt = conn.createStatement();
ResultSet rs = stmt.executeQuery("SELECT * FROM STUDENT WHERE GRADE &gt;= (SELECT AVG(GRADE) FROM STUDENT)");
</code></pre>

<div class="tc-admon-important">
  
  <p>Joined sub-queries are not supported.</p>
</div>
</div>
</div></div>

<ul>
<li><code>sysdate</code> - a keyword suggesting current time and date.</li>
<li><code>rownum</code> - a keyword to use in <code>WHERE</code> clauses, setting the number of rows to select.</li>
<li>Select for update â€“ allowing the locking of rows in order to update them later.</li>
<li>Remote and embedded query processes configuration â€“ allows fast access to the space using embedded mode.</li>
<li>Optimistic locking.</li>
<li>Batch Processing.</li>
<li>Increment a field in an UPDATE statement.</li>
</ul>

<div class="row"><div class="easyui-accordion" data-options="selected:'-1'" plain="true"><div title="Click here for example..." style="padding:10px;"><pre><code class="language-java">Connection conn;
Statement stmt = conn.createStatement();
int result = stmt.executeUpdate("UPDATE PERSON SET VERSION = VERSION + 1 WHERE ID = 10000");
</code></pre>

<div class="tc-admon-important">
  
  <p>Field incrementing is only supported for <code>Integer</code> fields using a "+' operator.</p>
</div>
</div>
</div></div>

<ul>
<li>A statement caching mechanism is provided to speed up statement parsing.</li>
<li>Meta Data API.</li>
<li>Connection pool.</li>
<li>All JDBC basic types including Blob and Clob.</li>
</ul>

<h1><a name="regular-expression">&#160;</a>Regular Expression</h1>

<p>XAP supports query using regular expression. You may use <code>like</code> or <code>rlike</code> expressions with your JDBC queries.</p>

<div class="tc-admon-note">
  
  <p>It is important to index <code>String</code> type fields used with regular expression queries. Not indexing these fields may result slow query execution and garbage creation.</p>
</div>

<p>When using the SQL <code>like</code> operator you may use the following:
<code>%</code> - match any string of any length (including zero length)
<code>_</code> - match on a single character</p>

<p>Querying the Space using the <a href="http://docs.oracle.com/javase/[%=Versions.java-version%]/docs/api/java/util/regex/Pattern.htm">Java Regular Expression</a> provides more options than the SQL <code>like</code> operator. The Query syntax is done using the <code>rlike</code> operator.</p>

<p>When you search for Space objects with String fields that include a <span class="tc-bold">single quote</span>, your query should use Parameterized Query. In the following example, we are searching for all <code>Data</code> objects that include the value <code>today's</code> with their <code>myTextField</code>:</p>

<pre><code class="language-java">PreparedStatement st = con.prepareStatement("select id,text,text2 from MyData WHERE text rlike ?");
st.setString(1, "today\u0027s.*");
ResultSet rs = st.executeQuery();
</code></pre>

<h1><a name="text-search">&#160;</a>Text Search</h1>

<p>XAP 12.1 introduced full text search capability leveraging the <a href="http://lucene.apache.org" target="_blank" >Lucene</a> search engine library supporting the <a href="http://lucene.apache.org/core/5_3_0/queryparser/org/apache/lucene/queryparser/classic/package-summary.htm#package_description" target="_blank" >Lucene Query Parser Syntax</a> except <code>Fields</code>.</p>

<p>Text search queries are available through the <code>text:</code> extension:</p>

<pre><code class="language-java">    Connection connection = GConnection.getInstance(gigaSpace.getSpace());

    // search 'java'
    String sql = "SELECT * from NewsArticle where title text:match ?";
    PreparedStatement pst = connection.prepareStatement(sql);
    pst.setObject(1, "java");
        
    ResultSet executeQuery = pst.executeQuery();
        
/....        
</code></pre>

<h1><a name="indexing">&#160;</a>Indexing</h1>

<p>It is highly recommended to use indexes on relevant properties to increase performance when using equality, bigger/less than, BETWEEN, IN, LIKE, NOT LIKE,  and IS NULL statements. For more information, see <a href="indexing.htm">Indexing</a>. The above supported query features can leverage indexes except for the <code>is NOT null</code> and <code>NOT IN</code>statements.</p>

<h1><a name="partitioning-support">&#160;</a>Partitioning Support</h1>

<p>In order to partition the data and route operations to the correct partition, specify a "routing column" for each table. The "routing column" is specified through one of three mechanisms:</p>

<ol>
<li>A POJO with a <a href="modeling-your-data.htm">@SpaceRouting</a> field can be sent to the space via the <code>snapshot</code> call prior to calling the JDBC API.</li>
<li>Create the table through JDBC; the first index as part of the CREATE TABLE statement will be the routing field.</li>
<li>If there is no indexed column, the first column as part of the CREATE TABLE will be the routing field.</li>
</ol>

<h1><a name="nested-field-query">&#160;</a>Nested Field Query</h1>

<p>You may use as part of the JDBC select statement nested fields. These could be a Map type fields or user-defined data type fields within the Space object. See the following example of a Space class with a nested Map and a nested object fields. Both are indexed:</p>

<pre><code class="language-java">public class MyData implements Serializable{

    public MyData(){}
    String data1;
    String data2;
    // getter and setter methods
}
</code></pre>

<pre><code class="language-java">@SpaceClass
public class MyClass {
    public MyClass (){}
    Integer num;
    String str;
    Integer id;
    HashMap&lt;String, MyData&gt; map; // a map within the space object
    MyData data; // an object within the space object

    @SpaceIndex (type=SpaceIndexType.EQUAL)
    public Integer getNum() {
        return num;
    }
    public void setNum(Integer num) {
        this.num = num;
    }

    @SpaceIndex (type=SpaceIndexType.EQUAL)
    public String getStr() {
        return str;
    }
    public void setStr(String str) {
        this.str = str;
    }

    @SpaceId (autoGenerate = false)
    @SpaceRouting
    public Integer getId() {
        return id;
    }
    public void setId(Integer id) {
        this.id = id;
    }

    @SpaceIndexes({@SpaceIndex(path="key1" , type = SpaceIndexType.EQUAL),
            @SpaceIndex(path="key2" , type = SpaceIndexType.EQUAL)})
    public HashMap&lt;String, MyData&gt; getMap() {
        return map;
    }
    public void setMap(HashMap&lt;String, MyData&gt; map) {
        this.map = map;
    }

    @SpaceIndexes({@SpaceIndex(path="data1" , type = SpaceIndexType.EQUAL),
            @SpaceIndex(path="data2" , type = SpaceIndexType.EQUAL)})
    public MyData getData() {
        return data;
    }
    public void setData(MyData data) {
        this.data = data;
    }
}
</code></pre>

<p>The following is an example for a JDBC query call you can use with the above Space object. Both the nested Map and nested object fields are used with the JDBC query below:</p>

<pre><code class="language-sql">String queryString =
"select uid,
map.key1.data1, map.key1.data2,
map.key2.data1, map.key2.data2,
data.data1, data.data2,str
from
org.test.MyClass where
map.key1.data1='aa' and
map.key1.data2='bb' and
map.key2.data1='cc' and
map.key2.data2='dd' and
data.data1 = 'ee' and
data.data1 = 'ff' and
str='ABCD'";
stmt = connection.createStatement();
ResultSet rs = stmt.executeQuery(queryString );
while (rs.next()) {
    ...
}
</code></pre>

<h1><a name="unsupported-features">&#160;</a>Unsupported Features</h1>

<p>The XAP JDBC Driver does not support the following:</p>

<ul>
<li>The SQL statements: <code>HAVING</code>, <code>VIEW</code>, <code>TRIGGERS</code>, <code>EXISTS</code>, <code>BETWEEN</code> in collections, <code>NOT</code>, <code>CREATE USER</code>, <code>GRANT</code>, <code>REVOKE</code>, <code>SET PASSWORD</code>,  <code>CONNECT USER</code>, <code>ON</code>.</li>
<li><code>CREATE</code> Database.</li>
<li><code>CREATE</code> Index, <code>DROP</code> Index.</li>
<li>Constraints: <code>NOT NULL</code>, <code>IDENTITY</code>, <code>UNIQUE</code>, <code>PRIMARY KEY</code>, Foreign Key <code>REFERENCES</code>, <code>NO ACTION</code>, <code>CASCADE</code>, <code>SET NULL</code>, <code>SET DEFAULT</code>, <code>CHECK</code>.</li>
<li>Set operations: <code>Union, Minus, Union All</code>.</li>
<li>Aggregate Functions: <code>STDEV</code>, <code>STDEVP</code>, <code>VAR</code>, <code>VARP</code>, <code>FIRST</code>, <code>LAST</code>.</li>
<li>The <code>UPDATE</code> statement does not allow the use of an expression or a <code>null</code> value in the <code>SET</code> clause.</li>
<li>Using a constant instead of the column name.</li>
<li>The <code>INSERT</code> statement does not allow the use of an expression in the <code>VALUES</code> clause.</li>
<li>"." used to indicate a double data type.</li>
<li>Using mathematical expressions in the <code>WHERE</code> clause, however the <a href="aggregators.htm">Aggregators</a> functionality can be used.</li>
<li>Using a non constant right-hand side comparison operator. This can be implemented via <a href="aggregators.htm#custom-aggregation">Custom Aggregation</a>.</li>
<li><code>LEFT [OUTER] JOIN</code></li>
<li><code>RIGHT [OUTER] JOIN</code></li>
<li><code>[INNER] JOIN</code></li>
<li>Statement::setFetchSize()</li>
</ul>

<div class="tc-admon-note">
  
  <p>When having <code>SELECT count (*) FROM myClass</code> JDBC query â€“ <code>myClass</code> sub classes object count are not taken into consideration when processing the query result. The <code>SELECT count (*) FROM myClass WHERE X=Y</code> and <code>SELECT (*) from myClass</code> do take into consideration <code>myClass</code> sub classes objects when processing the result. Future versions will resolve this inconsistency.
As a workaround, construct a JDBC query that includes a relevant <code>WHERE</code> part.</p>
</div>

<h1><a name="jdbc-reserved-words">&#160;</a>JDBC Reserved Words</h1>

<p>This section lists the JDBC reserved keywords, data types, separators and operators.</p>

<h2><a name="keywords">&#160;</a>Keywords</h2>

<pre><code class="language-bash">ALTER ADD AND ASC BETWEEN BY CREATE CALL DROP DEFAULT_NULL DESC DISTINCT
END FROM GROUP IN IS LIKE RLIKE MAX MIN NOT NULL OR ORDER SELECT SUBSTR SUM SYSDATE
UPPER WHERE COUNT DELETE EXCEPTION ROWNUM INDEX INSERT INTO SET TABLE TO_CHAR
TO_NUMBER FOR_UPDATE UPDATE UNION VALUES COMMIT ROLLBACK PRIMARY_KEY UID USING
</code></pre>

<h2><a name="data-types">&#160;</a>Data Types</h2>

<pre><code class="language-bash">date datetime  time float double number decimal boolean integer varchar varchar2
char timestamp long clob blob empty_clob() empty_blob() lob true false
</code></pre>

<h2><a name="separators-and-operators">&#160;</a>Separators and Operators</h2>

<pre><code class="language-bash">:=  || ; . ROWTYPE ~ &lt; &lt;= &gt;  &gt;= =&gt; != &lt;&gt; \(+\) ( ) \* / + - ? \{ \}
</code></pre>

<h1><a name="configuration">&#160;</a>Configuration</h1>

<p>The JDBC Driver should be configured using the following properties. These should be part of the <a href="the-space-configuration.htm#proxy">The Space Component</a> configuration when deployed:</p>

<table>
<thead>
<tr>
<th align="left">Parameter</th>
<th align="left">Description</th>
<th align="left">Default Value</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">space-config.QueryProcessor.space_read_lease_time</td>
<td align="left">Read timeout. Millisec units.</td>
<td align="left">0</td>
</tr>

<tr>
<td align="left">space-config.QueryProcessor.space_write_lease</td>
<td align="left">Object lease timeout. Millisec units.</td>
<td align="left">9223372036854775807L</td>
</tr>

<tr>
<td align="left">space-config.QueryProcessor.transaction_timeout</td>
<td align="left">Millisec unit. Transaction Timeout.</td>
<td align="left">30000</td>
</tr>

<tr>
<td align="left">space-config.QueryProcessor.init_jmx</td>
<td align="left">Expose Tracing via JMX</td>
<td align="left">false</td>
</tr>

<tr>
<td align="left">space-config.QueryProcessor.trace_exec_time</td>
<td align="left">Enable Tracing</td>
<td align="left">false</td>
</tr>

<tr>
<td align="left">space-config.QueryProcessor.debug_mode</td>
<td align="left">Boolean value. When true show debug information.</td>
<td align="left">false</td>
</tr>

<tr>
<td align="left">space-config.QueryProcessor.parser_case_sensetivity</td>
<td align="left">Boolean value. Determines if Column and Table names are case sensitive.</td>
<td align="left">true</td>
</tr>

<tr>
<td align="left">space-config.QueryProcessor.auto_commit</td>
<td align="left">Boolean value. Auto Commit mode</td>
<td align="left">true</td>
</tr>

<tr>
<td align="left">space-config.QueryProcessor.date_format</td>
<td align="left">Date Format</td>
<td align="left">yyyy-MM-dd</td>
</tr>

<tr>
<td align="left">space-config.QueryProcessor.datetime_format</td>
<td align="left">DateTime Format</td>
<td align="left">yyyy-MM-dd hh:mm:ss</td>
</tr>

<tr>
<td align="left">space-config.QueryProcessor.time_format</td>
<td align="left">Time Format</td>
<td align="left">hh:mm:ss</td>
</tr>
</tbody>
</table>

<p>Example:</p>

<pre><code class="language-xml">&lt;os-core:embedded-space  id="space" space-name="space" &gt;
    &lt;os-core:properties&gt;
        &lt;props&gt;
            &lt;prop key="space-config.QueryProcessor.transaction_timeout"&gt;50000&lt;/prop&gt;
            &lt;prop key="space-config.QueryProcessor.date_format"&gt;yyyy-MM-dd&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/os-core:properties&gt;
&lt;/os-core:embedded-space&gt;
</code></pre>

<h1><a name="jdbc-error-codes">&#160;</a>JDBC Error Codes</h1>

<p>The following is a list of JDBC error codes and their descriptions:</p>

<pre><code class="language-bash">
`100`: No (more) data
`0`: Successful Completion

- `101`: Can't alter table
- `102`: Table `&lt;tableName&gt;` does not exist
- `103`: Commit/Rollback failed
- `104`: Can't delete row
- `105`: Table does not exist
- `106`: Remote Exception occurred
- `107`: Failed to drop table
- `108`: All values must be set in a Prepared Statement
- `109`: Prepared value already set!
- `110`: Prepared value missing!
- `111`: Invalid data
- `112`: Invalid type for the specified column
- `113`: Unknown columns
- `114`: Unknown table in condition
- `115`: Can't set same value more than once
- `116`: Unknown column for IN condition
- `117`: Unknown execution type
- `118`: Table already exists
- `119`: Wrong data type in SUM function
- `120`: Error in rownum
- `121`: Select failed
- `122`: The selected column does not exist in the selected tables
- `123`: No such column for given alias
- `124`: Order by column should be in select list
- `125`: Must specify the column to return the sum of.
- `126`: All values must be set
- `127`: Wrong type for given column
- `128`: Incorrect number of values to insert
- `129`: Type mismatch in nested query
- `130`: Can't update row!
- `131`: Blob cannot hold `null` data
- `132`: Command not supported
- `133`: Both parameters should be greater than 1
- `134`: Clob cannot hold `null` data
- `135`: Can't convert clob to ascii, unsupported encoding
- `136`: Substring out of clob's bounds
- `137`: Error creating connection - Unknown host
- `138`: Error creating connection or reading QP properties
- `139`: Cannot commit an autocommit connection
- `140`: Cannot rollback an autocommit connection
- `141`: The given URL is not supported
- `142`: Prepared statement must contain prepared values
- `143`: Cannot call `SELECT` with `executeUpdate`. Use `executeQuery` instead
- `144`: Cannot set a `null` object
- `145`: Cannot set object, unknown type
- `146`: Used `executeQuery` instead of `executeUpdate`
- `147`: Cannot set a value
- `148`: Cannot represent this value as `byte`
- `149`: Cannot represent this value as `double`
- `150`: Cannot represent this value as `float`
- `151`: Cannot represent this value as `int`
- `152`: Cannot represent this value as `long`
- `153`: Cannot represent this value as `short`
- `154`: Cannot represent this value as boolean
- `155`: Column found in result
- `156`: Cannot represent this value as `Blob`
- `157`: Cannot represent this value as `Clob`
- `158`: Cannot represent this value as `Date`
- `159`: Cannot represent this value as `Time`
- `160`: Cannot represent this value as `Timestamp`
- `161`: The `next()` method must be called at least once
- `162`: Exhausted `ResultSet`
- `201`: Invalid SQL syntax
</code></pre>

</body>
</html>