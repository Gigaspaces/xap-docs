<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="NewSet.New-Changed-16-2">
    <head>
    </head>
    <body>
        <h1 class="tc-pagetitle">Customizing a Space</h1>
        <p>This topic describes how to customize a Space in a Kubernetes environment, by specifying multiple partitions, and by providing a backup partition (high availability option).</p>
        <div class="tc-admon-note">
            <p>The topics in this section assume basic knowledge of the GigaSpaces platform. If you aren't familiar with GigaSpaces, review the contents of the general <a href="../started/index.html">Getting Started</a> section before performing the tasks described here.</p>
        </div>
        <h2>Prerequisites</h2>
        <ul MadCap:conditions="Default.DoNotShow">
            <li>
                <p>Java SDK version 8 or 11</p>
            </li>
            <li>
                <p>Maven 3.2.5 or higher</p>
            </li>
            <li>
                <p>GigaSpaces <MadCap:xref href="../started/installation.html" class="unzipped-and-installed">unzipped and installed</MadCap:xref></p>
            </li>
        </ul>
        <ul>
            <li>
                <p>Perform installation of Helm charts, as described in <MadCap:xref href="16-2-kubernetes-s10-deploying-and-managing-gigaspaces.html" class="deploying-and-managing">Deploying and Managing GigaSpaces in Kubernetes</MadCap:xref></p>
            </li>
            <li MadCap:conditions="Default.DoNotShow">
                <p>Helm charts <code>xap </code>and <code>xap-pu</code> are extracted</p>
            </li>
        </ul>
        <p>&#160;</p>
        <div MadCap:conditions="NewSet.JustAColorForDivs">
            <h1>Deploy Multiple Partitions</h1>
            <p>Performance of the Kubernetes environment can be improved by allocating multiple partitions for a Space.</p>
            <p>The steps to allocate multiple partitions for a Space are shown below. This example allocates two partitions for the <code>demo</code> Space.</p>
            <ol>
                <li>
                    <p>Install <code>xap </code>charts.<br /></p><pre><code class="language-bash">helm install xap ./xap/ --version=<MadCap:variable name="Versions.product-version-long" /> --set manager.resources.limits.memory=1000Mi</code></pre>
                </li>
                <li>
                    <p style="text-align: left;">Wait for all pods to be ready.</p>
                </li> <li><p style="text-align: left;">Install the <code>demo</code> Space with two partitions.</p><pre><code class="language-bash">helm install demo ./xap-pu/ --set manager.name=xap,<b>partitions=2</b></code></pre></li><li><p>Enter the command <code>kubectl get pods</code> to see the result:</p></li><pre><code class="language-bash"><tt><b>NAME                            READY   STATUS    RESTARTS   AGE</b>
demo-xap-pu-0                   1/1     Running   0          44s
demo-xap-pu-1                   1/1     Running   0          23s
xap-grafana-67d9b898b5-d5jn4    1/1     Running   0          2m27s
xap-influxdb-0                  1/1     Running   0          2m27s
xap-operator-55c7997cd5-rt6bt   1/1     Running   0          2m27s
xap-xap-manager-0               1/1     Running   0          2m26s</tt><![CDATA[	
				]]></code></pre><li><p>You can also see the result in Ops Manager:<br /><img src="../Resources/Static/images/kubernetes-s30-ops-manager-two-partitions.png" /><br /></p></li></ol>
            <h1>Deploy with High Availability</h1>
            <p><i>High availabilty</i> deploys a backup partition that is in sync with the data in the primary partition. This eliminates downtime if the primary partition goes down, by seamlessly serving the same data from the backup. This example adds high availability to a Space called <code>demo</code>. </p>
            <ol>
                <li>
                    <p>Undeploy the Space<br /></p><pre><code class="language-bash">helm delete demo</code></pre>
                </li>
                <li>
                    <p>Install helm charts<br /></p><pre><code class="language-bash">helm install xap ./xap/ --version=16.1.1 --set manager.resources.limits.memory=700Mi</code></pre>
                </li>
                <li>
                    <p style="text-align: left;">Wait for all pods to be ready.</p>
                </li>
                <li>
                    <p>Install the Space with high availability turned on.<br /></p><pre><code class="language-bash">helm install demo ./xap-pu/ --set manager.name=xap,partitions=1,<b>ha=true</b></code></pre>
                </li>
                <li>
                    <p>Enter the command <code>kubectl get pods</code> to see the result:</p>
                </li>
                <li><pre><code class="language-bash"><tt><b>NAME                            READY   STATUS    RESTARTS   AGE</b>
demo-xap-pu-0                   1/1     Running   0          44s
demo-xap-pu-1                   1/1     Running   0          23s
xap-grafana-67d9b898b5-d5jn4    1/1     Running   0          2m27s
xap-influxdb-0                  1/1     Running   0          2m27s
xap-operator-55c7997cd5-rt6bt   1/1     Running   0          2m27s
xap-xap-manager-0               1/1     Running   0          2m26s</tt><![CDATA[	
				]]></code></pre>
                </li>
                <li>
                    <p>In Ops Manager, click on the <code>demo</code> service to see the primary and backup instances.<br /></p>
                </li>
                <p>
                    <img src="../Resources/Static/images/kubernetes-s30-ops-manager-high-availability.png" />
                </p>
            </ol>
        </div>
    </body>
</html>