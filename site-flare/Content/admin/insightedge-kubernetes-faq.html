<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <h1>InsightEdge-Kubernetes FAQ</h1>
        <h1>General Questions</h1>
        <p><b>Which Kubernetes version do you support?</b>
        </p>
        <p>GigaSpaces products can be used with Kubernetes release 1.9 or later.</p>
        <p><b>What is Helm?</b>
        </p>
        <p>Helm is a popular package manager for Kubernetes that's used to manage the orchestration of an application cluster. GigaSpaces uses Helm to deploy the InsightEdge Platform and the XAP data grid on Kubernetes.</p>
        <p>Helm employs a packaging format called a chart, which is a collection of files that describe a related set of Kubernetes resources.</p>
        <div class="tc-admon-note">
            <p>For more information about Helm and Helm charts, see the <a href="https://docs.helm.sh/developing_charts/#charts" target="_blank">Helm documentation</a>.</p>
        </div>
        <p><b>Do the InsightEdge and XAP open-source editions support Kubernetes-based deployment?</b>
        </p>
        <p>No, only the commercial editions (InsightEdge Platform, XAP&#160;Premium, and XAP&#160;Enterprise)&#160;support Kubernetes. GigaSpaces provides a 24-hour tryme license and a longer (30-day) trial license so you can evaluate these products in the Kubernetes environment.</p>
        <p><b>How is deploying GigaSpaces products over Kubernetes different from deploying them to the Service Grid? Does Kubernetes support the Grid Service Agent, Grid Service Container, etc.?</b>
        </p>
        <p>KubeGrid (the GigaSpaces integration of InsightEdge and XAP with Kubernetes) makes a lot of the Service Grid's high availability features redundant, so there's no need for most of the Service Grid components. KubeGrid was also designed to utilize Kubernetes' scheduling and native controllers to leverage any new features introduced in future releases and the open-source community.</p>
        <p><b>Do GigaSpaces products support the major cloud providers, such as AWS, Microsoft Azure, and Google Cloud Platform?</b>
        </p>
        <p>Kubernetes can be used in any type of environment (on-premise, cloud, or hybrid) and is supported by every major cloud provider, including public cloud platforms like AWS, Microsoft Azure, and GCP. Now that InsightEdge and XAP&#160;can be deployed over Kubernetes, we support all the major cloud providers that can be used with Kubernetes.</p>
        <h1>Installing the InsightEdge Platform and XAP in Kubernetes</h1>
        <p><b>What do Helm charts look like in terms of structure and dependencies?</b>
        </p>
        <p>A Helm chart has the following directory structure:</p>
        <blockquote>
            <p><code>&lt;the application name&gt;/</code>
            </p>
            <p><code>Chart.yaml          # A YAML file containing information about the chart</code>
            </p>
            <p><code>LICENSE             # OPTIONAL: A plain text file containing the license for the chart</code>
            </p>
            <p><code>README.md           # OPTIONAL: A human-readable README file</code>
            </p>
            <p><code>requirements.yaml   # OPTIONAL: A YAML file listing dependencies for the chart</code>
            </p>
            <p><code>values.yaml         # The default configuration values for this chart</code>
            </p>
            <p><code>charts/             # A directory containing any charts upon which this chart depends.</code>
            </p>
            <p><code>templates/          # A directory of templates that, when combined with values,</code>
            </p>
            <p><code># will generate valid Kubernetes manifest files.</code>
            </p>
            <p><code>templates/NOTES.txt # OPTIONAL: A plain text file containing short usage notes</code>
            </p>
        </blockquote>
        <div class="tc-admon-note">
            <p>For more information about Helm chart file structure, see this section of the <a href="https://docs.helm.sh/developing_charts/#the-chart-file-structure" target="_blank">Helm documentation</a>.</p>
        </div>
        <p><b>What type of Helm charts are included in with InsightEdge and XAP?</b>
        </p>
        <p>The InsightEdge Platform and XAP data grid can each be installed using one main Helm chart (<code>insightedge </code>or <code>xap</code>). The following additional sub-charts are available for those who want to customize the configuration of one or more Pod types:</p>
        <ul>
            <li><code>manager</code> (for the Manager Pod)</li>
            <li><code>pu</code> (for the Data Pod)</li>
            <li><code>zeppelin</code> (for InsightEdge only)</li>
        </ul>
        <p>Gigaspaces charts are hosted in the GigaSpaces Helm repository. This repository can be added to Helm using the following command:</p>
        <p><code>helm repo add gigaspaces https://resources.gigaspaces.com/helm-charts</code>
        </p>
        <p>The GigaSpaces charts can be fetched and copied to a local disk using the following command:</p>
        <p><code>helm fetch gigaspaces/insightedge --version=<MadCap:variable name="Versions.helm-version" /> --untar</code>
        </p>
        <p><b>Can I deploy multiple Processing Units in a Data Pod?</b>
        </p>
        <p>This is theoretically possible but not practical to implement, because it negates the advantages of the Kubernetes architecture.</p>
        <p>The best practice for a Kubernetes- based architecture is for each Data Pod to be the smallest and simplest unit, meaning it holds a single Processing Unit. This architecture enables auto-recovery and auto-scaling with each Processing Unit as a standalone, so an out of memory exception or high CPU utilization in a single Processing Unit won't trigger Kubernetes to perform Data Pod recovery or auto-scaling for other, unaffected Processing Units.</p>
        <p>At deployment time, a Processing Unit JAR is provided via a resource URL&#160;during the Helm installation. The Processing Unit is then associated with a Data Pod (each Data Pod contains a single Processing Unit instance).</p>
        <h1>Administering the InsightEdge Platform and XAP in Kubernetes</h1>
        <p>How do I monitor InsightEdge and XAP&#160;in Kubernetes?</p>
        <p>The Kubernetes dashboard can be used to verify the following:</p>
        <ul>
            <li>Pod status -  In the <b>Workloads&gt;Pods </b>area, you can see the deployment status of each Pods</li>
            <li>CPU and memory - In the <b>Clusters&gt;Nodes </b>area, click a Node to see the CPU&#160;and memory usage.</li>
        </ul>
        <p>To view system metrics, you can use Grafana with InfluxDB. The integration process for Influxdb and Grafana with InsightEdge and XAP&#160;are described in the Solutions and Best Practices section of the documentation website.</p>
        <p><b>Can  I debug my application and see the application logs in Kubernetes?</b>
        </p>
        <p>Yes. See the Kubernetes documentation for instructions.</p>
        <h1>Using InsightEdge in Kubernetes</h1>
        <p><b>How do I set security rules/RBAC in Kubernetes?</b>
        </p>
        <p>In a Kubernetes clusters with Role-Based Access Control (RBAC) enabled, users can configure the Kubernetes RBAC roles and service accounts that are used by the various Spark jobs on Kubernetes components to access the Kubernetes API server.</p>
        <p><b>Can I submit a Spark Job with dependency JARs locally or remotely?</b>
        </p>
        <p>Spark’s best practice is to package dependencies as an uber-JAR, and deploy them this way (as a single JAR). This best practice applies for InsightEdge.</p>
        <div class="tc-admon-note">
            <p>For more information, see <MadCap:xref href="kubernetes-spark-job.html">Running a Spark Job in Kubernetes</MadCap:xref>.<MadCap:conditionalText MadCap:conditions="Default.DoNotShow"> https://docs.gigaspaces.com/xap/14.0/admin/kubernetes-spark-job.html#submitting-spark-jobs-with-insightedge-submit</MadCap:conditionalText></p>
        </div>
        <p>In some scenarios, it is possible to submit Spark jobs with multiple dependencies, but this is a complicated scenario. See the Spark documentation for more information.</p>
        <div class="tc-admon-attention">
            <p>InsightEdge <MadCap:variable name="Versions.product-version-short" /> has been certified with Spark 2.3.2. Client mode is not supported in Spark 2.3.</p>
        </div>
        <p MadCap:conditions="Default.DoNotShow"><b>How do you store Spark executor logs/Integrate Spark History Server?</b>
        </p>
        <p MadCap:conditions="Default.DoNotShow">See: https://github.com/GigaSpaces-ProfessionalServices/aa-rfdb-kubernetes/raw/master/Integrate-Apache-Spark-History-Server.docx</p>
    </body>
</html>