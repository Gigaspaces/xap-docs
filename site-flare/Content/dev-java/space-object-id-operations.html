<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <div class="product-bar">
            <p><a><MadCap:variable name="General.ProductXAP" /></a>
            </p>
        </div>
        <div class="product-bar">
            <p><a><MadCap:variable name="General.ProductXAPSkyline" /></a>
            </p>
        </div>
        <div class="product-bar">
            <p><a>Smart DIH</a>
            </p>
        </div>
        <h1>Space Object ID</h1>
        <div class="tc-admon-note">
            <p>POJO is available, but in Smart DIH, by default, only <a href="document-overview.html">Space Document</a> is used.</p>
        </div>
        <h1><a name="how-space-object-id-is-generated"></a>How is the Space Object ID Generated?</h1>
        <p>You can insert an object into the space using the <code>write()</code> and <code>writeMultiple()</code> methods. When a new object is inserted into the space, it embeds a unique ID - called the UID. The UID can be generated explicitly by the client using a unique value generated by the application business logic or using a sequencer running within the space.</p>
        <p>The space UID for space object can be created in three different ways:</p>
        <ul>
            <li>When a space object has no <code>SpaceId</code> property declared, the space generates a UID for the object.</li>
            <li>When a space object has a property which is declared as <code>SpaceId</code> and marked as <code>auto-generate=false</code>, the UID is generated based on the value of the ID field the user is setting.</li>
            <li>When a space object has a property which is declared as <code>SpaceId</code> and marked as <code>auto-generate=true</code>, the UID is generated by the space and placed back into the field using the relevant setter method. In this case, the field must be a <code>java.lang.String</code> type.</li>
        </ul>
        <h1><a name="the-spaceid-field-content"></a>The SpaceId Field content</h1>
        <ul>
            <li>When a space Class has no <code>SpaceId</code> property declared, it will be returned without any ID. This means that <span class="tc-bold">update operations cannot be executed</span> on the space Class. Only the <code>read()</code> and <code>write()</code> methods can be executed.</li>
            <li>When a space Class has a property which is declared as <code>SpaceId</code> and <code>auto-generate=true</code> and its value is <code>null</code>, the <code>SpaceId</code> field will store the ID.</li>
            <li>When a space Class has a property which is declared as <code>SpaceId</code> and <code>auto-generate=true</code> and its value is not null, the <code>SpaceId</code> field will store the original value stored within the <code>SpaceId</code> field.</li>
            <li>When a space Class has a property which is declared as <code>SpaceId</code> and <code>auto-generate=false</code>, the <code>SpaceId</code> field will store the original value stored within the <code>SpaceId</code> field used to generate the UID.</li>
        </ul>
        <div MadCap:conditions="Version.16-1-1-born">
            <p> </p>
            <h1><a name="compound-spaceid"></a>Compound SpaceId</h1>
            <p>A compound SpaceId (consisting of more than one field) can be implemented using Java annotations. </p><pre><code class="language-java">
@SpaceId(properties = {"firstName", "lastName"})
public class Person {
	private String firstName;
	private String lastName;
 ...
// Operations are the same, for example
    gigaSpace.write( new Person("John", "Smith"));					
</code></pre>
            <h2>Space Routing</h2>
            <p>When <code>@SpaceRouting</code> is not specified, the routing will be resolved from the value of the first property in the <code>@SpaceId</code> properties list. In the above example, the value of the field is "firstName". <code>@SpaceRouting</code> specified on a different field’s <code>get </code>method, will return its value as the routing.</p>
            <h2>IdQuery Matching

</h2><pre><code class="language-java">Object id = CompoundSpaceId.from("John", "Smith");
gigaSpace.read(new IdQuery&lt;&gt;(Person.class, id));
gigaSpace.readById(Person.class, id);
gigaSpace.readByIds(Person.class, new Object[]{id1, id2});
</code></pre>
            <h2>Template Matching</h2><pre><code class="language-java">
//exact match
Person template = new Person("John", "Smith");
gigaSpace.read(template);

//partial match
Person template = new Person("John", null);
gigaSpace.read(template);</code></pre>
            <h2>
SQLQuery Matching</h2><pre><code class="language-java">
//exact matching
SQLQuery&lt;Person&gt; query = new SQLQuery&lt;&gt;(Person.class, "firstName=? AND lastName=?", "John", "Smith");
gigaSpace.read(query);

//partial matching
SQLQuery&lt;Person&gt; query = new SQLQuery&lt;&gt;(Person.class, "firstName=?", "John");
gigaSpace.read(query);
</code></pre>
        </div>
        <h2>Custom SpaceId </h2>
        <p>You might need to construct an ID that will be comprised from a user defined Object rather than using a Numeric or String type field. In such a case your user defined class used as the <code>SpaceId</code> data type must implement the <code>toString</code> , <code>hashCode</code> and <code>equals</code> methods.</p>
        <div class="tc-admon-note">
            <p>The compound ID class must implement a <code>toString</code> method that return a unique String for each ID.</p>
        </div>
        <p>See below example:</p>
        <div class="easyui-tabs" plain="true" data-options="">
            <div title="  The CompoundId " style="padding:10px"><pre><code class="language-java">import java.io.Serializable;

public class CompoundId implements Serializable{
    public String key1;
    public String key2;
    public String key3;

    public String toString()
    {
        return key1+ "_" + key2+ "_" + key3;
    }

    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((key1 == null) ? 0 : key1.hashCode());
        result = prime * result + ((key2 == null) ? 0 : key2.hashCode());
        result = prime * result + ((key3 == null) ? 0 : key3.hashCode());
        return result;
    }

    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (!(obj instanceof CompoundId)) 
            return false;
        CompoundId other = (CompoundId) obj;
        if (key1 == null) {
            if (other.key1 != null)
                return false;
        } else if (!key1.equals(other.key1))
            return false;
        if (key2 == null) {
            if (other.key2 != null)
                return false;
        } else if (!key2.equals(other.key2))
            return false;
        if (key3 == null) {
            if (other.key3 != null)
                return false;
        } else if (!key3.equals(other.key3))
            return false;
        return true;
    }

}
</code></pre>
            </div>
            <div title="  The Space Class " style="padding:10px"><pre><code class="language-java">import com.gigaspaces.annotation.pojo.SpaceClass;
import com.gigaspaces.annotation.pojo.SpaceId;

@SpaceClass
public class MySpaceClass {
    CompoundId id;
    String data;

    @SpaceId(autoGenerate = false)
    public CompoundId getId() {
        return id;
    }

    public void setId(CompoundId id) {
        this.id = id;
    }
    public String getData() {
        return data;
    }

    public void setData(String data) {
        this.data = data;
    }

    public String toString() {
        return "ID:" + id + " Data:"+ data;
    }
}
</code></pre>
            </div>
            <div title="  The Application Code " style="padding:10px"><pre><code class="language-java">GigaSpace space = new GigaSpaceConfigurer (new SpaceProxyConfigurer("space")).gigaSpace();

CompoundId id = new CompoundId();
id.key1="1";
id.key2="2";
id.key3="3";

MySpaceClass obj = new MySpaceClass();
obj.setData("AAAAAAAAA");
obj.setId(id);

space.write(obj);

MySpaceClass ret = space.readById(MySpaceClass.class, id);
</code></pre>
            </div>
        </div>
        <div class="tc-admon-refer">
            <p>See the <a href="/sbp/global-id-generator.html">Global ID Generator</a> for a generic ID generator service you may use with your application.
To learn how to read space entries by ID see <a href="query-by-id.html">ID Queries</a>.</p>
        </div>
    </body>
</html>