<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
<head></head>
<body>
<h1>REST API</h1>
  

<p>The REST API exposing HTTP based interface Space. It is leveraging the <a href="the-gigaspace-interface-overview.html">XAP API</a>. It support the following methods:</p>

<ol>
<li>GET - can be used to perform an introduceType, readByID or a readMultiple action by a space query.</li>
<li>POST - can be used to perform a write / writeMultiple or update / updateMultiple actions.</li>
<li>DELETE - can be used to perform take / takeMultiple actions either by ID or by a space query.</li>
</ol>

<h1><a name="introduce-type">&#160;</a>Introduce Type</h1>

<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>Description</td>
<td>Introduce the specific type to space.</td>
</tr>

<tr>
<td>Request URL</td>
<td>PUT <code>http://localhost:8080/{Type}/_introduce_type</code></td>
</tr>
</tbody>
</table>

<p>Request Schema:</p>

<pre><code class="language-json">{
  "idProperty": { //required
    "propertyName": "id",
    "autoGenerated": true, // optional
    "indexType": "EQUAL" // optional, use with autoGenerate. SEE com.gigaspaces.metadata.index.SpaceIndexType
  },
  "routingProperty": {
    "propertyName": "id",
    "indexType": "EQUAL" // optional. SEE com.gigaspaces.metadata.index.SpaceIndexType
  },
  "fixedProperties": [
    {
      "propertyName": "id",
      "propertyType": "int32" // predefined types or full Java class path*
    },
    {
      "propertyName": "prop1",
      "propertyType": "string", // predefined types or full Java class path*
      "documentSupport": "DEFAULT" // optional. SEE com.gigaspaces.metadata.SpaceDocumentSupport
    },
    {
      "propertyName": "prop2",
      "propertyType": "java.util.Map", // predefined types or full Java class path*
      "documentSupport": "DEFAULT", // optional. SEE com.gigaspaces.metadata.SpaceDocumentSupport
      "storageType": "DEFAULT" // optional, use with documentSupport. SEE com.gigaspaces.metadata.StorageType
    },
    {
      "propertyName": "indexedProp",
      "propertyType": "string", // predefined types or full Java class path*
      "indexType": "EQUAL", // optional. SEE com.gigaspaces.metadata.index.SpaceIndexType
      "uniqueIndex": true // optional, must be used with indexType field only. Default to false.
    }
  ],
  "compoundIndex": {
    "paths": [
      "prop1",
      "prop2"
    ],
    "unique": true // optional
  },
  "fifoSupport": "DEFAULT", // SEE com.gigaspaces.annotation.pojo.FifoSupport
  "blobStoreEnabled": true,
  "storageType": "DEFAULT", // SEE com.gigaspaces.metadata.StorageType
  "supportsOptimisticLocking": true,
  "supportsDynamicProperties": false // optional, default to true
}
</code></pre>

<p>Response Schema:</p>

<pre><code class="language-json">{
   "status":"success"
}
</code></pre>

<p>Predefined types and their conversion:</p>

<table>
<thead>
<tr>
<th align="left">Type name</th>
<th align="left">Java class</th>
</tr>
</thead>

<tbody>
<tr>
<td align="left">int32</td>
<td align="left">java.lang.Integer</td>
</tr>

<tr>
<td align="left">int64</td>
<td align="left">java.lang.Long</td>
</tr>

<tr>
<td align="left">double</td>
<td align="left">java.lang.Double</td>
</tr>

<tr>
<td align="left">number</td>
<td align="left">java.lang.Double</td>
</tr>

<tr>
<td align="left">float</td>
<td align="left">java.lang.Float</td>
</tr>

<tr>
<td align="left">boolean</td>
<td align="left">java.lang.Boolean</td>
</tr>

<tr>
<td align="left">string</td>
<td align="left">java.lang.String</td>
</tr>

<tr>
<td align="left">datetime</td>
<td align="left">java.util.Date</td>
</tr>

<tr>
<td align="left">array</td>
<td align="left">java.util.List</td>
</tr>

<tr>
<td align="left">set</td>
<td align="left">java.util.Set</td>
</tr>

<tr>
<td align="left">sortedset</td>
<td align="left">java.util.SortedSet</td>
</tr>

<tr>
<td align="left">object</td>
<td align="left">com.gigaspaces.document.SpaceDocument</td>
</tr>
</tbody>
</table>

<p>Examples:</p>

<pre><code class="language-bash">curl -XPUT -H "Content-Type: application/json" -d '{"idProperty":{"propertyName":"id","autoGenerated":false},"routingProperty":{"propertyName":"id"},"fixedProperties":[{"propertyName":"id","propertyType":"int64"},{"propertyName":"name","propertyType":"string"},{"propertyName":"age","propertyType":"java.lang.Integer"}]}' http://localhost:8080/MyObject/_introduce_type
</code></pre>

<h1><a name="write">&#160;</a>Write</h1>

<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>Description</td>
<td>Write single entry to the space.</td>
</tr>

<tr>
<td>Request URL</td>
<td>POST <code>http://localhost:8080/{Type}/</code></td>
</tr>

<tr>
<td>Request Headers</td>
<td>Content-Type: application/json</td>
</tr>

<tr>
<td>Request Body</td>
<td>JSON object representation of a SpaceDocument object.</td>
</tr>
</tbody>
</table>

<p>Response Schema:</p>

<pre><code class="language-json">{
   "status":"success"
}
</code></pre>

<p>Examples:</p>

<pre><code class="language-bash">curl -XPOST -H "Content-Type: application/json" -d '{"id":1, "name":"myName", "age":10}' http://localhost:8080/MyObject
</code></pre>

<h1><a name="write-multiple">&#160;</a>Write Multiple</h1>

<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>Description</td>
<td>Write multiple entries to the space.</td>
</tr>

<tr>
<td>Request URL</td>
<td>POST <code>http://localhost:8080/{Type}/</code></td>
</tr>

<tr>
<td>Request Headers</td>
<td>Content-Type: application/json</td>
</tr>

<tr>
<td>Request Body</td>
<td>JSON array representation of a SpaceDocument objects.</td>
</tr>
</tbody>
</table>

<p>Response Schema:</p>

<pre><code class="language-json">{
   "status":"success"
}
</code></pre>

<p>Examples:</p>

<pre><code class="language-bash">curl -XPOST -H "Content-Type: application/json" -d '[{"id":2, "name":"John", "age":16},
{"id":3, "name":"Michael", "age":18}]' http://localhost:8080/MyObject
</code></pre>

<h1><a name="count">&#160;</a>Count</h1>

<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>Description</td>
<td>Returns the number of entries in space of the specified type</td>
</tr>

<tr>
<td>Request URL</td>
<td>GET <code>http://localhost:8080/{Type}/count</code></td>
</tr>
</tbody>
</table>

<p>Response Schema:</p>

<pre><code class="language-json">{
   "status":"success",
   "data":0
}
</code></pre>

<p>Examples:</p>

<pre><code class="language-bash">curl -XGET http://localhost:8080/{Type}/count
</code></pre>

<h1><a name="read-multiple">&#160;</a>Read Multiple</h1>

<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>Description</td>
<td>Read multiple entries from space that matches the query.</td>
</tr>

<tr>
<td>Request URL</td>
<td>GET <code>http://localhost:8080/{Type}/</code></td>
</tr>

<tr>
<td>Request Query Parameters</td>
<td>query - a <a href="query-sql.html">SQLQuery</a> that is a SQL-like syntax <br/>max - the maximum amount of entries to read</td>
</tr>
</tbody>
</table>

<p>Response Schema:</p>

<pre><code class="language-json">{
   "status":"success",
   "data":[
      {
         "id":1,
         "name":"First"
      },
      {
         "id":2,
         "name":"Second"
      }
   ]
}
</code></pre>

<p>Examples:</p>

<pre><code class="language-bash">curl -XGET http://localhost:8080/MyObject/?query=age='10'
curl -XGET http://localhost:8080/MyObject/?query=id=%271%27%20or%20id=%272%27%20or%20id=%273%27
</code></pre>

<p>*The url is encoded, the query is: id="1' or id="2' or id="3'</p>

<h1><a name="read-by-id">&#160;</a>Read By Id</h1>

<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>Description</td>
<td>Read entry from space with the provided id</td>
</tr>

<tr>
<td>Request URL</td>
<td>GET <code>http://localhost:8080/{Type}/{id}</code></td>
</tr>
</tbody>
</table>

<p>Response Schema:</p>

<pre><code class="language-json">{
   "status":"success",
   "data":{
      "id":1,
      "name":"First"
   }
}
</code></pre>

<p>Examples:</p>

<pre><code class="language-bash">curl -XGET http://localhost:8080/MyObject/1
curl -XGET http://localhost:8080/MyObject/2
curl -XGET http://localhost:8080/MyObject/3
</code></pre>

<h1><a name="update-multiple">&#160;</a>Update Multiple</h1>

<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>Description</td>
<td>Update entries in space</td>
</tr>

<tr>
<td>Request URL</td>
<td>POST <code>http://localhost:8080/{Type}</code></td>
</tr>
</tbody>
</table>

<p>Response Schema:</p>

<pre><code class="language-json">{
   "status":"success"
}
</code></pre>

<p>Examples:</p>

<pre><code class="language-bash">curl -XPOST -H "Content-Type: application/json" -d '[{"id":1,"name":"myName","age":11},{"id":2,"name":"John","age":17},{"id":3,"name":"Michael","age":19}]' http://localhost:8080/MyObject

See that data2 field is updated:

curl http://localhost:8080/MyObject/?query=age=11

</code></pre>

<h1><a name="take-multiple">&#160;</a>Take Multiple</h1>

<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>Description</td>
<td>Gets and deletes entries from space that matches the query.</td>
</tr>

<tr>
<td>Request URL</td>
<td>DELETE <code>http://localhost:8080/{Type}/</code></td>
</tr>

<tr>
<td>Request Query Parameters</td>
<td>query - a <a href="query-sql.html">SQLQuery</a> that is a SQL-like syntax</td>
</tr>
</tbody>
</table>

<p>Response Schema:</p>

<pre><code class="language-json">{
   "status":"success",
   "data":[
        {
           "id":1,
           "name":"First"
        },
        {
           "id":2,
           "name":"Second"
        }
     ]
}
</code></pre>

<p>Examples:</p>

<pre><code class="language-bash">curl -XDELETE http://localhost:8080/MyObject/?query=id=%271%27%20or%20id=%272%27

*The url is encoded, the query is: id=1 or id=2

See that only Item3 remains:

curl -XGET http://localhost:8080/MyObject/?query=id=%271%27%20or%20id=%272%27%20or%20id=%273%27
</code></pre>

<h1><a name="take-by-id">&#160;</a>Take By Id</h1>

<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>Description</td>
<td>Gets and deletes the entry from space with the provided id</td>
</tr>

<tr>
<td>Request URL</td>
<td>DELETE <code>http://localhost:8080/{Type}/{id}</code></td>
</tr>
</tbody>
</table>

<p>Response Schema:</p>

<pre><code class="language-json">{
   "status":"success",
   "data":{
         "id":1,
         "name":"First"
      }
}
</code></pre>

<p>Examples:</p>

<pre><code class="language-bash">curl -XDELETE http://localhost:8080/MyObject/3

See that Item3 does not exists:

curl -XGET http://localhost:8080/MyObject/?query=id=%271%27%20or%20id=%272%27%20or%20id=%273%27
</code></pre>

</body>
</html>